<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>CANLI TV</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  margin: 0;
  background: black;
  overflow: hidden;
}
#player {
  width: 100vw;
  height: 100vh;
  background-color: black;
}
#info {
  position: absolute;
  top: 10px;
  left: 10px;
  color: white;
  font-size: 20px;
  font-family: Arial;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
</head>
<body>

<div id="info">Yükleniyor...</div>
<video id="player" controls autoplay playsinline></video>

<script>
// JSON URL → sadece burayı değiştirirsin
const jsonURL = "https://raw.githubusercontent.com/utay88/Utay88/main/kontrol.json";

async function loadChannel() {
    document.getElementById("info").innerHTML = "Yayın yükleniyor...";

    try {
        const response = await fetch(jsonURL + "?t=" + Date.now());
        const data = await response.json();
        const stream = data.channel;

        const video = document.getElementById("player");

        if (Hls.isSupported()) {
            const hls = new Hls({
                maxBufferLength: 60,
                xhrSetup: function(xhr, url) {
                    xhr.setRequestHeader("Referer", "https://google.com/");
                    xhr.withCredentials = false;
                }
            });
            hls.loadSource(stream);
            hls.attachMedia(video);
            video.play();
        } else {
            video.src = stream;
            video.play();
        }

        document.getElementById("info").innerHTML = "";
    } catch (e) {
        document.getElementById("info").innerHTML = "Yayın yüklenemedi.";
    }
}

loadChannel();
setInterval(loadChannel, 5000); // JSON değişirse yayını anında değiştirir
</script>

</body>
</html>
