<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CanlÄ± YayÄ±n</title>

<style>
    body { margin:0; background:black; overflow:hidden; }
    #videoContainer {
        width:100vw;
        height:100vh;
        position:relative;
        background:black;
    }
    video {
        width:100%;
        height:100%;
        object-fit:contain;
        background:black;
    }
    #controls {
        position:absolute;
        bottom:0;
        width:100%;
        height:55px;
        background:rgba(0,0,0,0.55);
        display:flex;
        align-items:center;
        padding:0 12px;
        box-sizing:border-box;
    }

    #liveDot {
        width:10px;
        height:10px;
        background:red;
        border-radius:50%;
        margin-right:6px;
    }

    #liveText {
        color:white;
        font-size:17px;
        margin-right:12px;
    }

    #seekBar {
        flex:1;
        margin:0 12px;
        height:6px;
    }

    #volumeBtn, #fsBtn {
        color:white;
        font-size:25px;
        margin-left:14px;
        user-select:none;
    }
</style>
</head>

<body>

<div id="videoContainer">
    <video id="video" controlslist="nodownload noremoteplayback"></video>

    <div id="controls">
        <div id="liveDot"></div>
        <div id="liveText">LIVE</div>
        <input type="range" id="seekBar" min="0" max="100" value="100">
        <div id="volumeBtn">ðŸ”Š</div>
        <div id="fsBtn">â›¶</div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script>
const video = document.getElementById("video");
const seekBar = document.getElementById("seekBar");
const volumeBtn = document.getElementById("volumeBtn");

const streamURL = "https://tv-trtcocuk.medya.trt.com.tr/master.m3u8";

if (Hls.isSupported()) {
    const hls = new Hls({
        maxAutoLevel: 0,
        startLevel: -1
    });

    hls.loadSource(streamURL);
    hls.attachMedia(video);

    hls.on(Hls.Events.MANIFEST_PARSED, () => {
        // *** DAÄ°MA EN YÃœKSEK KALÄ°TE SEÃ‡Ä°LSÄ°N ***
        const maxQ = hls.levels.length - 1;
        hls.currentLevel = maxQ;
        hls.loadLevel = maxQ;
        hls.nextLevel = maxQ;
        hls.autoLevelEnabled = false;

        video.play();
    });

} else if (video.canPlayType("application/vnd.apple.mpegurl")) {
    video.src = streamURL;
}

// SEEK BAR sabitte kalsÄ±n
seekBar.addEventListener("input", () => {
    const duration = video.duration || 1;
    video.currentTime = (seekBar.value / 100) * duration;
});

video.addEventListener("timeupdate", () => {
    const duration = video.duration || 1;
    seekBar.value = (video.currentTime / duration) * 100;
});

// SES
volumeBtn.onclick = () => {
    video.muted = !video.muted;
    volumeBtn.textContent = video.muted ? "ðŸ”ˆ" : "ðŸ”Š";
};

// TAM EKRAN
document.getElementById("fsBtn").onclick = () => {
    if (!document.fullscreenElement) {
        document.documentElement.requestFullscreen();
    } else {
        document.exitFullscreen();
    }
};
</script>

</body>
</html>
